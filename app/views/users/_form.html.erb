<%= form_for( resource, as: resource_name, url: registration_path(resource_name),html: {class: 'custom-form'}) do |f| %>

    <%= devise_error_messages! %>
    
    <%= render partial: "layouts/form_field", :locals => {
        label: t('user.name'), 
        type: "text", 
        name:"user[name]", 
        id: "name", 
        required: true,
        placeholder: "", 
        value: user[:name] 
      }  %>
    <%= render partial: "layouts/form_field", :locals => {
        label: t('user.email'), 
        type: "email", 
        name:"user[email]", 
        id: "email", 
        required: true,
        placeholder: "", 
        value: user[:email] 
      }  %>
    <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
      <div><%=t("login.confirmation_waiting")%>: <%= resource.unconfirmed_email %></div>
    <% end %>
    <% if user.id %>
    <%= render partial: "layouts/form_field", :locals => {
        label: t('user.current_password'), 
        type: "password", 
        name: "user[current_password]", 
        id: "current_password", 
        required: true,
        placeholder: "", 
        value: "" 
      }  %>
    <%= render partial: "layouts/form_field", :locals => {
        label: t('user.new_password'), 
        type: "password", 
        name:"user[password]", 
        id: "password", 
        required: false,
        placeholder: "", 
        value: "" 
      }  %>
    <% else %>
      <%= render partial: "layouts/form_field", :locals => {
          label: t('user.password'), 
          type: "password", 
          name: "user[password]", 
          id: "password", 
          required: true,
          placeholder: "", 
          value: "" 
        }  %>
    <% end %>
    <%= render partial: "layouts/form_field", :locals => {
        label: t('user.confirm_password'), 
        type: "password", 
        name: "user[password_confirmation]", 
        id: "confirm_password", 
        required: false,
        placeholder: "", 
        value: "" 
      }  %>

    <%= render partial: "layouts/form_field", :locals => {
        label: t('user.tags'), 
        type: "", 
        data_role: "tagsinput",
        name: "user[tags]", 
        id: "tags", 
        required: false,
        placeholder: "", 
        value: (user[:tags] || "")
      }  %>

    <div class="form-group row"  >
      <label for="ui_language" class="col-sm-2 col-form-label"><%=t('dictionary.language')%></label>
      <div class="col-sm-10">
     <%= f.select :ui_language, options_for_select(options_for_select_all_languages, I18n.locale.to_s), {}, { :class => 'account_language form-control' } %>
   </div>
   </div>   
    <div class="form-group row"  >
      <label for="photo" class="col-sm-2 col-form-label"><%=t('user.picture')%></label>
      <div class="col-sm-10">
        <div class="image-edit-actions">
          <%=render partial: "layouts/input_file_custom", :locals => {name: "", file_name: user[:photo_file_name], file_path: user[:photo_file_path], id:"photo", label: t('course.upload'), data_name: "user[photo]",
          data_img_id: "edit-uploaded-picture", width: 150, height: 150, accept: "image/*"} %>
        </div>
        <div class="image-container" style="width:150px;height:150px;">
          <img id="edit-uploaded-picture" class="picture" src="<%= user[:photo_file_path] || 'https://via.placeholder.com/150x150.png/ccc/fff?text=150x150'%>"/></div>
      </div>
      <canvas class="canvas" style="width:150px;height:150px;"></canvas>
    </div>
  
    <% if  !user.id and MOVLE::Application.config.recaptcha %>
      <div class="field">
        <%= recaptcha_tags %>
      </div>
    <% end %>

        <div class="form-group row">
          <div class="col-sm-10">
      <%= f.submit(user.id ? t("user.update"): t("user.register"), {class: "btn btn-orange"}) %>
    </div>
    </div>
  <% end %>